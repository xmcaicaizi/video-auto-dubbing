# Copy to `.env` or set as system environment variables.
# PowerShell example:
#   Get-Content env.example | ForEach-Object { if ($_ -and $_ -notmatch '^#') { $k,$v=$_.Split('=',2); setx $k $v } }

# Infrastructure
POSTGRES_DB=dubbing
POSTGRES_USER=dubbing
POSTGRES_PASSWORD=dubbing123
POSTGRES_PORT=5432

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin123
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001
MINIO_BUCKET=videos
# Host-accessible endpoint for presigned URLs
MINIO_PUBLIC_ENDPOINT=localhost:9000

RABBITMQ_USER=rabbitmq
RABBITMQ_PASSWORD=rabbitmq123
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# Service ports
API_PORT=8080
TTS_PORT=8000
GATEWAY_HTTP_PORT=80

# GLM translation
GLM_API_KEY=your_glm_api_key
GLM_API_URL=https://open.bigmodel.cn/api/paas/v4/chat/completions
GLM_MODEL=glm-4.5
GLM_RPS=5

# ASR (Moonshine)
ASR_SERVICE_URL=http://localhost:8002
ASR_MODEL_ID=moonshine/tiny
ASR_DEVICE=cpu
ASR_COMPUTE_TYPE=float16
ASR_BACKEND=moonshine_onnx

# TTS (IndexTTS-2 local inference)
TTS_BACKEND=index_tts2
INDEXTTS_MODEL_DIR=/app/models/IndexTTS-2
INDEXTTS_CFG_PATH=/app/models/IndexTTS-2/config.yaml
INDEXTTS_PROMPT_AUDIO=/app/assets/voice_01.wav
INDEXTTS_DEVICE=auto
INDEXTTS_USE_FP16=true
INDEXTTS_USE_TORCH_COMPILE=false
INDEXTTS_USE_CUDA_KERNEL=false
HF_ENDPOINT=https://hf-mirror.com
HF_HUB_CACHE=/app/models/IndexTTS-2/hf_cache
STRICT_DURATION=false
MAX_CONCURRENT_REQUESTS=10
MAX_RETRIES=3
RETRY_DELAY_SECONDS=1.0

# Worker processing
TRANSLATE_BATCH_SIZE=20
TRANSLATE_ITEM_MAX_RETRIES=2
TRANSLATE_MAX_TEXT_LENGTH=4000
TTS_BATCH_SIZE=20
TTS_MAX_CONCURRENCY=4
TTS_MAX_RETRIES=3
TTS_RETRY_DELAY_SECONDS=2.0
TIMEOUT_EXTRACT_AUDIO_SECONDS=600
TIMEOUT_ASR_SECONDS=900
TIMEOUT_TTS_SECONDS=900
TIMEOUT_MUX_SECONDS=900
FFMPEG_DENOISE_FILTER=afftdn=nr=12:nf=-25

# Long video profile (uncomment to use)
# TRANSLATE_BATCH_SIZE=30
# TRANSLATE_ITEM_MAX_RETRIES=3
# TRANSLATE_MAX_TEXT_LENGTH=6000
# TTS_BATCH_SIZE=30
# TTS_MAX_CONCURRENCY=6
# TTS_MAX_RETRIES=4
# TTS_RETRY_DELAY_SECONDS=3.0
# TIMEOUT_EXTRACT_AUDIO_SECONDS=1800
# TIMEOUT_ASR_SECONDS=2400
# TIMEOUT_TTS_SECONDS=2400
# TIMEOUT_MUX_SECONDS=1800
# MINIO_RESERVED_STORAGE_GB=200
